(base) princemensah@princemensah-macbook-pro Perplexica % pnpm db:migrate

> soraai-chat@1.0.0 db:migrate /Users/princemensah/Documents/Perplexica
> node scripts/db-migrate.cjs

‚è≥ Running PostgreSQL migrations...
‚úÖ PostgreSQL migrations completed in 7573 ms
üöÄ DB migration completed
(base) princemensah@princemensah-macbook-pro Perplexica % pnpm dev       

> soraai-chat@1.0.0 dev /Users/princemensah/Documents/Perplexica
> next dev

   ‚ñ≤ Next.js 15.2.6
   - Local:        http://localhost:3000
   - Network:      http://192.168.228.154:3000
   - Environments: .env.local, .env

 ‚úì Starting...
 ‚úì Compiled /instrumentation in 189ms (39 modules)
‚Ñπ Running database migrations...                                                                                           soraai 4:48:53 PM
‚è≥ Running PostgreSQL migrations...
‚úÖ PostgreSQL migrations completed in 2493 ms
üöÄ DB migration completed
‚úî Database migrations completed successfully                                                                               soraai 4:48:56 PM
 ‚úì Ready in 4.9s
 ‚úì Compiled /middleware in 306ms (107 modules)
 ‚óã Compiling / ...
 ‚úì Compiled / in 10.6s (12343 modules)
‚öô Skipping provider Ollama because required environment variables are missing.                                             config 4:49:08 PM
‚öô Skipping provider Anthropic because required environment variables are missing.                                          config 4:49:08 PM
‚öô Skipping provider Google Gemini because required environment variables are missing.                                      config 4:49:08 PM
‚öô Skipping provider Groq because required environment variables are missing.                                               config 4:49:08 PM
‚öô Skipping provider Deepseek AI because required environment variables are missing.                                        config 4:49:08 PM
‚öô Skipping provider AI/ML API because required environment variables are missing.                                          config 4:49:08 PM
‚öô Skipping provider LM Studio because required environment variables are missing.                                          config 4:49:08 PM
‚öô Skipping provider Lemonade because required environment variables are missing.                                           config 4:49:08 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:49:08 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:49:08 PM
 ‚úì Compiled in 264ms (4726 modules)
 ‚óã Compiling /api/auth/[...all] ...
 GET / 200 in 15999ms
 ‚úì Compiled /manifest.webmanifest in 6.3s (12352 modules)
 GET /manifest.webmanifest 200 in 2555ms
 ‚óã Compiling /_not-found ...
 GET /api/auth/get-session 200 in 7543ms
 ‚úì Compiled /_not-found in 821ms (12356 modules)
 ‚úì Compiled /api/providers in 0ms (7640 modules)
 ‚úì Compiled in 1266ms (12359 modules)
 GET /api/auth/get-session 200 in 2091ms
‚öô Skipping provider Ollama because required environment variables are missing.                                             config 4:49:19 PM
‚öô Skipping provider Anthropic because required environment variables are missing.                                          config 4:49:19 PM
‚öô Skipping provider Google Gemini because required environment variables are missing.                                      config 4:49:19 PM
‚öô Skipping provider Groq because required environment variables are missing.                                               config 4:49:19 PM
‚öô Skipping provider Deepseek AI because required environment variables are missing.                                        config 4:49:19 PM
‚öô Skipping provider AI/ML API because required environment variables are missing.                                          config 4:49:19 PM
‚öô Skipping provider LM Studio because required environment variables are missing.                                          config 4:49:19 PM
‚öô Skipping provider Lemonade because required environment variables are missing.                                           config 4:49:19 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:49:19 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:49:19 PM
 GET /api/providers 200 in 2369ms
 GET /api/auth/get-session 200 in 15ms
 GET /icon.png 404 in 3216ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:49:19 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:49:19 PM
 GET /api/providers 200 in 6ms
 GET /api/auth/get-session 200 in 9ms
 GET /api/auth/get-session 200 in 4ms
 GET /api/auth/get-session 200 in 5ms
 GET /api/auth/get-session 200 in 6ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:49:19 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:49:19 PM
 GET /api/providers 200 in 15ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:49:19 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:49:19 PM
 GET /api/providers 200 in 6ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:49:19 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:49:19 PM
 GET /api/providers 200 in 4ms
 ‚óã Compiling /api/discover ...
 ‚úì Compiled /api/weather in 1797ms (12376 modules)
‚öô Skipping provider Ollama because required environment variables are missing.                                             config 4:49:22 PM
‚öô Skipping provider Anthropic because required environment variables are missing.                                          config 4:49:22 PM
‚öô Skipping provider Google Gemini because required environment variables are missing.                                      config 4:49:22 PM
‚öô Skipping provider Groq because required environment variables are missing.                                               config 4:49:22 PM
‚öô Skipping provider Deepseek AI because required environment variables are missing.                                        config 4:49:22 PM
‚öô Skipping provider AI/ML API because required environment variables are missing.                                          config 4:49:22 PM
‚öô Skipping provider LM Studio because required environment variables are missing.                                          config 4:49:22 PM
‚öô Skipping provider Lemonade because required environment variables are missing.                                           config 4:49:22 PM
 POST /api/weather 200 in 2000ms
 POST /api/weather 200 in 2104ms
 GET /api/auth/get-session 200 in 46ms
‚Ñπ SearxNG search completed { query: 'site:irs.gov/newsroom IRS guidance update',                                          searxng 4:49:25 PM
  engines: [ 'bing news' ],
  resultCount: 0,
  fetchDurationMs: 3265,
  totalDurationMs: 3267 }
 GET /api/discover?mode=preview 200 in 5407ms
 GET /api/discover?mode=preview 200 in 4ms
 GET /api/auth/get-session 200 in 26ms
 GET /api/auth/get-session 200 in 24ms
 ‚óã Compiling /api/uploads ...
 ‚úì Compiled /api/uploads in 1723ms (13241 modules)
‚öô Skipping provider Ollama because required environment variables are missing.                                             config 4:49:47 PM
‚öô Skipping provider Anthropic because required environment variables are missing.                                          config 4:49:47 PM
‚öô Skipping provider Google Gemini because required environment variables are missing.                                      config 4:49:47 PM
‚öô Skipping provider Groq because required environment variables are missing.                                               config 4:49:47 PM
‚öô Skipping provider Deepseek AI because required environment variables are missing.                                        config 4:49:47 PM
‚öô Skipping provider AI/ML API because required environment variables are missing.                                          config 4:49:47 PM
‚öô Skipping provider LM Studio because required environment variables are missing.                                          config 4:49:47 PM
‚öô Skipping provider Lemonade because required environment variables are missing.                                           config 4:49:47 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:49:48 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:49:48 PM
 GET /api/auth/get-session 200 in 41ms
 GET /api/auth/get-session 200 in 17ms
 GET /api/auth/get-session 200 in 69ms
 GET /api/auth/get-session 200 in 205ms
 GET /api/auth/get-session 200 in 88ms
 GET /api/auth/get-session 200 in 35ms
 GET /api/auth/get-session 200 in 10ms
 GET /api/auth/get-session 200 in 11ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:24 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:24 PM
 GET /api/providers 200 in 33ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:24 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:24 PM
 GET /api/providers 200 in 7ms
 GET /api/auth/get-session 200 in 7ms
 GET /api/auth/get-session 200 in 18ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:25 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:25 PM
 GET /api/providers 200 in 6ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:25 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:25 PM
 GET /api/providers 200 in 7ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:25 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:25 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:25 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:25 PM
 GET /api/providers 200 in 3ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:25 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:25 PM
 GET /api/providers 200 in 30ms
‚Ñπ SearxNG search completed { query: 'site:irs.gov/newsroom IRS guidance update',                                          searxng 4:51:27 PM
  engines: [ 'bing news' ],
  resultCount: 0,
  fetchDurationMs: 1931,
  totalDurationMs: 1934 }
 GET /api/discover?mode=preview 200 in 1967ms
 GET / 200 in 2248ms
 GET /api/discover?mode=preview 200 in 3ms
 POST /api/uploads 200 in 101727ms
 POST /api/weather 200 in 1419ms
 GET /api/auth/get-session 200 in 6ms
 POST /api/weather 200 in 1657ms
 GET /manifest.webmanifest 200 in 11ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:28 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:28 PM
 GET /api/providers 200 in 6ms
 GET /icon.png 404 in 43ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:28 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:28 PM
 GET /api/providers 200 in 11ms
 GET /api/discover?mode=preview 200 in 12ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:28 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:28 PM
 GET /api/providers 200 in 5ms
 GET /api/discover?mode=preview 200 in 7ms
 POST /api/weather 200 in 188ms
 POST /api/weather 200 in 167ms
 GET /api/auth/get-session 200 in 30ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:51:41 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:51:41 PM
 POST /api/uploads 200 in 12221ms
 POST /api/weather 200 in 656ms
 POST /api/weather 200 in 192ms
 ‚óã Compiling /api/chat ...
 ‚úì Compiled /api/chat in 2.8s (13803 modules)
‚öô Skipping provider Ollama because required environment variables are missing.                                             config 4:52:21 PM
‚öô Skipping provider Anthropic because required environment variables are missing.                                          config 4:52:21 PM
‚öô Skipping provider Google Gemini because required environment variables are missing.                                      config 4:52:21 PM
‚öô Skipping provider Groq because required environment variables are missing.                                               config 4:52:21 PM
‚öô Skipping provider Deepseek AI because required environment variables are missing.                                        config 4:52:21 PM
‚öô Skipping provider AI/ML API because required environment variables are missing.                                          config 4:52:21 PM
‚öô Skipping provider LM Studio because required environment variables are missing.                                          config 4:52:21 PM
‚öô Skipping provider Lemonade because required environment variables are missing.                                           config 4:52:21 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:52:23 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:52:23 PM
‚öô Loading models with providers. { chatProviderId: 'openai-0c69f1f3',                                                    api:chat 4:52:23 PM
  embeddingProviderId: 'openai-0c69f1f3',
  chatModelKey: 'gpt-4o-mini',
  embeddingModelKey: 'text-embedding-3-small' }
‚Ñπ Models loaded { durationMs: 1 }                                                                                        api:chat 4:52:23 PM
‚Ñπ Starting search and answer { focusMode: 'ebmValidator', optimizationMode: 'speed', elapsedMs: 1073 }                   api:chat 4:52:23 PM
‚Ñπ Starting EBM validation run. { messageLength: 22, historyTurns: 0, fileCount: 1 }                              search:ebm-agent 4:52:23 PM
 GET /api/auth/get-session 200 in 57ms
 POST /api/weather 200 in 715ms
‚öô Matched snapshot with template. { template: 'generic_rra' }                                                            ebm:text 4:52:28 PM
‚Ñπ Detected QR code { page: 1, scale: 1.4, durationMs: '180.2' }                                                            ebm:qr 4:52:31 PM
‚Ñπ QR extraction finished { pageCount: 1, matches: 1, durationMs: '304.3' }                                                 ebm:qr 4:52:31 PM
 GET /api/auth/get-session 200 in 14ms
‚Ñπ EBM validation completed successfully. { fileId: '92a8834ed2e655269ca98162897ee3d5',                           search:ebm-agent 4:52:37 PM
  summary: 'Invoice validation reported issues.' }
 POST /api/chat 200 in 20073ms
 ‚óã Compiling /api/suggestions ...
 ‚úì Compiled /api/suggestions in 1318ms (13794 modules)
‚öô Skipping provider Ollama because required environment variables are missing.                                             config 4:52:39 PM
‚öô Skipping provider Anthropic because required environment variables are missing.                                          config 4:52:39 PM
‚öô Skipping provider Google Gemini because required environment variables are missing.                                      config 4:52:39 PM
‚öô Skipping provider Groq because required environment variables are missing.                                               config 4:52:39 PM
‚öô Skipping provider Deepseek AI because required environment variables are missing.                                        config 4:52:39 PM
‚öô Skipping provider AI/ML API because required environment variables are missing.                                          config 4:52:39 PM
‚öô Skipping provider LM Studio because required environment variables are missing.                                          config 4:52:39 PM
‚öô Skipping provider Lemonade because required environment variables are missing.                                           config 4:52:39 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:52:39 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:52:39 PM
 GET /api/auth/get-session 200 in 14ms
 POST /api/suggestions 200 in 3407ms
 POST /api/weather 200 in 646ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:52:56 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:52:56 PM
‚öô Loading models with providers. { chatProviderId: 'openai-0c69f1f3',                                                    api:chat 4:52:56 PM
  embeddingProviderId: 'openai-0c69f1f3',
  chatModelKey: 'gpt-4o-mini',
  embeddingModelKey: 'text-embedding-3-small' }
‚Ñπ Models loaded { durationMs: 2 }                                                                                        api:chat 4:52:56 PM
‚Ñπ Starting search and answer { focusMode: 'ebmValidator', optimizationMode: 'speed', elapsedMs: 1030 }                   api:chat 4:52:56 PM
‚Ñπ Starting EBM validation run. { messageLength: 22, historyTurns: 0, fileCount: 1 }                              search:ebm-agent 4:52:56 PM
‚öô Matched snapshot with template. { template: 'generic_rra' }                                                            ebm:text 4:53:05 PM
‚Ñπ Detected QR code { page: 1, scale: 1.4, durationMs: '193.3' }                                                            ebm:qr 4:53:09 PM
‚Ñπ QR extraction finished { pageCount: 1, matches: 1, durationMs: '204.0' }                                                 ebm:qr 4:53:09 PM
 GET /api/auth/get-session 200 in 56ms
‚Ñπ EBM validation completed successfully. { fileId: '92a8834ed2e655269ca98162897ee3d5',                           search:ebm-agent 4:53:16 PM
  summary: 'Invoice validation reported issues.' }
 POST /api/chat 200 in 20621ms
‚öô Initialized model provider. { type: 'openai', id: 'openai-0c69f1f3', name: 'OpenAI' }                           models:registry 4:53:16 PM
‚öô Initialized model provider. { type: 'openai', id: 'openai-groq-bc547248', name: 'Groq' }                        models:registry 4:53:16 PM
 POST /api/suggestions 200 in 9ms
 GET /api/auth/get-session 200 in 10ms
